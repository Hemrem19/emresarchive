<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport" />
    <title>citavers - Your Research, Your Rules.</title>
    <meta name="description" content="The simple research paper manager. Organize, annotate, and connect your knowledge without losing control of your data." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://citavers.com/" />
    <meta property="og:title" content="citavers - Your Research, Your Rules." />
    <meta property="og:description" content="The simple research paper manager. Organize, annotate, and connect your knowledge." />
    <meta property="og:image" content="https://citavers.com/assets/logos/social-preview.png" />
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0f172a">
    <link rel="icon" type="image/png" href="assets/logos/favicon.png">
    <link rel="apple-touch-icon" href="assets/logos/icon-192.png">
    <link rel="manifest" href="assets/logos/site.webmanifest">
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <!-- PDF.js & Vis-Network (App Dependencies) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf_viewer.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://unpkg.com/vis-network@9.1.9/standalone/umd/vis-network.min.js"></script>

    <script>
        // Configure PDF.js
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }

        // Tailwind Config
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3b82f6", /* Modern Blue */
                        "primary-dark": "#2563eb",
                        "dark-bg": "#0B0F19", /* Deep dark blue-black */
                        "card-dark": "#111827",
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"]
                    },
                    backgroundImage: {
                        'hero-glow': "radial-gradient(circle at 50% 0%, rgba(59, 130, 246, 0.15) 0%, transparent 60%)",
                        'grid-pattern': "linear-gradient(to right, #1f2937 1px, transparent 1px), linear-gradient(to bottom, #1f2937 1px, transparent 1px)",
                    }
                },
            },
        }
    </script>

    <style>
        /* Modern Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Glassmorphism Utilities */
        .glass {
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .glass-card {
            background: linear-gradient(180deg, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0.4) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-2px);
            border-color: rgba(59, 130, 246, 0.3);
        }

        /* Hero Image 3D effect - reduced rotation on mobile for better fit */
        .hero-image-container {
            transform: perspective(1000px) rotateX(2deg);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }
        @media (min-width: 768px) {
            .hero-image-container {
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            }
        }

        /* Safe Areas */
        body {
            padding-top: env(safe-area-inset-top);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }
        
        /* Mobile Sidebar transitions */
        .sidebar-transition {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>

<body class="bg-[#0B0F19] font-display text-slate-300 antialiased selection:bg-primary selection:text-white overflow-x-hidden">

    <!-- ========================================== -->
    <!-- LANDING PAGE (Visible only on root / )     -->
    <!-- ========================================== -->
    <div id="landing-page" class="relative w-full overflow-hidden">
        
        <!-- Background Grids & Glows -->
        <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4wNSkiLz48L3N2Zz4=')] [mask-image:linear-gradient(to_bottom,white,transparent)] pointer-events-none"></div>
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-hero-glow pointer-events-none"></div>

        <!-- Navbar -->
        <nav class="fixed top-0 w-full z-50 glass">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <img src="assets/logos/logo-mark.png" alt="Logo" class="h-8 w-8" onerror="this.style.display='none'">
                    <span class="text-white font-bold text-lg tracking-tight lowercase">citavers</span>
                </div>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/Hemrem19/citavers" target="_blank" class="hidden sm:flex items-center gap-2 text-sm font-medium text-slate-400 hover:text-white transition-colors">
                        GitHub
                    </a>
                    <a href="#/app" class="bg-white text-slate-900 px-4 sm:px-5 py-2 rounded-full text-sm font-bold hover:bg-slate-200 transition-colors whitespace-nowrap">
                        Open App
                    </a>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="relative pt-28 pb-16 md:pt-32 md:pb-20 px-4 sm:px-6 max-w-7xl mx-auto text-center">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-semibold uppercase tracking-wider mb-6 animate-fade-in">
                <span class="w-2 h-2 rounded-full bg-blue-400 animate-pulse"></span>
                v2.2 Available
            </div>
            
            <h1 class="text-4xl sm:text-5xl md:text-7xl font-extrabold text-white mb-6 leading-tight tracking-tight">
                Your Research. <br class="hidden md:block" />
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">Fully Under Your Control.</span>
            </h1>
            
            <p class="text-base sm:text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-8 md:mb-10 leading-relaxed px-2">
                The research assistant that lives on your computer. Private, fast, and yours forever.
                No servers to trust, no subscriptions to pay.
            </p>

            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-16 md:mb-20 px-4">
                <a href="#/app" class="w-full sm:w-auto px-8 py-4 bg-primary hover:bg-primary-dark text-white rounded-lg font-bold text-lg shadow-lg shadow-blue-500/25 transition-all transform hover:scale-105">
                    Start Organizing
                </a>
                <a href="#/docs" class="w-full sm:w-auto px-8 py-4 bg-slate-800 hover:bg-slate-700 text-slate-200 border border-slate-700 rounded-lg font-semibold text-lg transition-all">
                    See How It Works
                </a>
            </div>

            <!-- Hero Image / Dashboard Preview -->
            <div class="relative max-w-5xl mx-auto hero-image-container rounded-xl overflow-hidden bg-slate-800">
                <!-- PLACEHOLDER: Replace src with your actual dashboard screenshot -->
                <img src="assets/screenshots/dashboard-preview.png" 
                     onerror="this.src='https://placehold.co/1200x800/1e293b/cbd5e1?text=Dashboard+Preview+Image'" 
                     alt="App Dashboard" 
                     class="w-full h-auto opacity-90 hover:opacity-100 transition-opacity duration-500">
                     
                <div class="absolute inset-0 bg-gradient-to-t from-[#0B0F19] via-transparent to-transparent opacity-50"></div>
            </div>
        </section>

        <!-- Value Prop (Bento Grid) -->
        <section class="py-16 md:py-24 px-4 sm:px-6 relative">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-2xl sm:text-3xl font-bold text-white mb-8 md:mb-12 text-center">Why use citavers?</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Card 1: Privacy (Large) -->
                    <div class="glass-card md:col-span-2 p-6 md:p-8 rounded-2xl relative overflow-hidden group">
                        <div class="absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity">
                            <span class="material-symbols-outlined text-9xl">lock</span>
                        </div>
                        <div class="relative z-10">
                            <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center mb-6">
                                <span class="material-symbols-outlined text-blue-400">shield_lock</span>
                            </div>
                            <h3 class="text-xl md:text-2xl font-bold text-white mb-3">Private by Design</h3>
                            <p class="text-slate-400 text-base md:text-lg leading-relaxed">
                                Your library lives directly on your device. We don't see your research, we don't track your reading habits, and we don't store your files on our servers. Your intellectual property stays with you.
                            </p>
                        </div>
                    </div>

                    <!-- Card 2: Offline -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl">
                        <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mb-6">
                            <span class="material-symbols-outlined text-purple-400">wifi_off</span>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-white mb-2">Always Available</h3>
                        <p class="text-slate-400 text-sm md:text-base">
                            No internet? No problem. Use the full app anywhere—on a plane, in a lab, or off the grid.
                        </p>
                    </div>

                    <!-- Card 3: Performance -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl">
                        <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center mb-6">
                            <span class="material-symbols-outlined text-green-400">bolt</span>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-white mb-2">Distraction-Free</h3>
                        <p class="text-slate-400 text-sm md:text-base">
                            Designed for focus. No loading screens, no complex menus. Just you and your papers.
                        </p>
                    </div>

                    <!-- Card 4: Open Source -->
                    <div class="glass-card md:col-span-2 p-6 md:p-8 rounded-2xl">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-12 h-12 bg-orange-500/20 rounded-lg flex items-center justify-center">
                                <span class="material-symbols-outlined text-orange-400">favorite</span>
                            </div>
                            <h3 class="text-lg md:text-xl font-bold text-white">Free & Transparent</h3>
                        </div>
                        <p class="text-slate-400 text-sm md:text-base">
                            Built by researchers, for researchers. The code is open for anyone to see. No hidden fees or locked features.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features (Zig-Zag Layout) -->
        <section class="py-16 md:py-24 px-4 sm:px-6 bg-slate-900/50">
            <div class="max-w-7xl mx-auto space-y-16 md:space-y-24">
                
                <!-- Feature 1: Graph -->
                <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12">
                    <div class="md:w-1/2 order-2 md:order-1">
                        <div class="inline-block px-3 py-1 mb-4 text-xs font-semibold tracking-wider text-blue-400 uppercase bg-blue-900/30 rounded-full">
                            Visual Discovery
                        </div>
                        <h2 class="text-2xl md:text-4xl font-bold text-white mb-4 md:mb-6">See the Big Picture.</h2>
                        <p class="text-slate-400 text-base md:text-lg mb-6 md:mb-8 leading-relaxed">
                            Don't just collect papers—connect them. Visualize how your sources relate to each other with an interactive map. Find patterns and clusters in your research that simple lists can't show.
                        </p>
                        <ul class="space-y-3 text-slate-300 text-sm md:text-base">
                            <li class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-green-400 text-xl">check_circle</span>
                                See connections instantly
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-green-400 text-xl">check_circle</span>
                                Organize by topic or status
                            </li>
                        </ul>
                    </div>
                    <div class="md:w-1/2 order-1 md:order-2 w-full">
                        <div class="glass-card p-2 rounded-xl border border-slate-700">
                             <!-- PLACEHOLDER: Replace with Graph Screenshot -->
                            <img src="assets/screenshots/graph-view.png" 
                                 onerror="this.src='https://placehold.co/800x600/1e293b/cbd5e1?text=Network+Graph+Screenshot'"
                                 alt="Graph View" class="rounded-lg w-full h-auto shadow-2xl">
                        </div>
                    </div>
                </div>

                <!-- Feature 2: PDF Reader (Reversed) -->
                <div class="flex flex-col md:flex-row-reverse items-center gap-8 md:gap-12">
                    <div class="md:w-1/2 order-2 md:order-1">
                        <div class="inline-block px-3 py-1 mb-4 text-xs font-semibold tracking-wider text-purple-400 uppercase bg-purple-900/30 rounded-full">
                            Better Reading
                        </div>
                        <h2 class="text-2xl md:text-4xl font-bold text-white mb-4 md:mb-6">Read. Highlight. Think.</h2>
                        <p class="text-slate-400 text-base md:text-lg mb-6 md:mb-8 leading-relaxed">
                            A reading experience designed for deep work. Highlight important sections, stick notes to specific pages, and write summaries without ever leaving your document.
                        </p>
                        <ul class="space-y-3 text-slate-300 text-sm md:text-base">
                            <li class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-purple-400 text-xl">edit_note</span>
                                Write notes as you read
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-purple-400 text-xl">picture_as_pdf</span>
                                Highlight key text
                            </li>
                        </ul>
                    </div>
                    <div class="md:w-1/2 order-1 md:order-2 w-full">
                        <div class="glass-card p-2 rounded-xl border border-slate-700">
                             <!-- PLACEHOLDER: Replace with PDF Viewer Screenshot -->
                            <img src="assets/screenshots/pdf-view.png" 
                                 onerror="this.src='https://placehold.co/800x600/1e293b/cbd5e1?text=PDF+Viewer+Screenshot'"
                                 alt="PDF Reader" class="rounded-lg w-full h-auto shadow-2xl">
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-16 md:py-24 px-4 sm:px-6 text-center">
            <div class="max-w-4xl mx-auto glass p-8 md:p-12 rounded-3xl border border-blue-500/20 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"></div>
                
                <h2 class="text-2xl md:text-4xl font-bold text-white mb-4 md:mb-6">Ready to get organized?</h2>
                <p class="text-slate-400 text-base md:text-lg mb-8 md:mb-10 max-w-2xl mx-auto">
                    Start managing your research simply and securely. No sign-up required.
                </p>
                <a href="#/app" class="inline-flex items-center gap-2 px-8 py-4 bg-white text-slate-900 rounded-lg font-bold text-lg hover:bg-slate-200 transition-colors w-full sm:w-auto justify-center">
                    <span>Launch App</span>
                    <span class="material-symbols-outlined">rocket_launch</span>
                </a>
                <p class="mt-6 text-sm text-slate-500">Free and Open Source under MIT License.</p>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-12 border-t border-slate-800 text-center text-slate-500 text-sm px-4">
            <div class="flex flex-col sm:flex-row justify-center gap-4 sm:gap-6 mb-4">
                <a href="#" class="hover:text-slate-300 transition-colors">Privacy Policy</a>
                <a href="#" class="hover:text-slate-300 transition-colors">Terms of Service</a>
                <a href="https://github.com/Hemrem19/citavers" target="_blank" class="hover:text-slate-300 transition-colors">GitHub</a>
            </div>
            <p>&copy; 2025 citavers. Built for science.</p>
        </footer>

    </div> <!-- End Landing Page -->


    <!-- ========================================== -->
    <!-- APP SHELL (Hidden by default on root)      -->
    <!-- ========================================== -->
    <div id="app-shell" class="hidden">
        
        <!-- Mobile Sidebar Overlay & Sidebar -->
        <div id="mobile-sidebar-overlay" class="fixed inset-0 bg-black/60 z-30 hidden lg:hidden transition-opacity opacity-0 pointer-events-none"></div>
        <aside id="mobile-sidebar"
            class="fixed top-0 left-0 h-full w-72 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-slate-800 p-4 flex flex-col z-40 transform -translate-x-full sidebar-transition lg:hidden shadow-2xl">
            <!-- Mobile Sidebar Content -->
             <div class="flex items-center justify-between mb-8">
                <a href="#/app" class="flex items-center gap-3 text-slate-900 dark:text-slate-100">
                    <img src="assets/logos/logo-mark.png" alt="Logo" class="h-8 w-8" onerror="this.style.display='none'">
                    <h1 class="text-xl font-bold font-display lowercase">citavers</h1>
                </a>
                <button id="close-mobile-menu-btn" class="p-2 text-slate-500 hover:text-slate-900 dark:hover:text-white rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <!-- Mobile Nav Links -->
            <nav class="flex-grow space-y-1 overflow-y-auto custom-scrollbar">
                <a href="#/app" class="sidebar-link flex items-center gap-3 px-3 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 hover:text-primary transition-colors text-base">
                    <span class="material-symbols-outlined text-[24px]">inbox</span>
                    <span class="font-medium">All Papers</span>
                </a>
                <a href="#/graph" class="sidebar-link flex items-center gap-3 px-3 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 hover:text-primary transition-colors text-base">
                    <span class="material-symbols-outlined text-[24px]">hub</span>
                    <span class="font-medium">Network</span>
                </a>
                <a href="#/settings" class="sidebar-link flex items-center gap-3 px-3 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 hover:text-primary transition-colors text-base">
                    <span class="material-symbols-outlined text-[24px]">settings</span>
                    <span class="font-medium">Settings</span>
                </a>
                
                <!-- Spacer -->
                <div class="h-4"></div>
                
                <!-- Sidebar dynamic content containers -->
                <div id="mobile-sidebar-status-list"></div>
            </nav>
        </aside>

        <div class="flex min-h-screen">
            <!-- Desktop Sidebar -->
            <aside id="desktop-sidebar"
                class="w-64 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-slate-800 p-4 flex-col hidden lg:flex sticky top-0 h-screen">
                <a href="#/app" class="flex items-center gap-3 mb-8 text-slate-900 dark:text-slate-100 px-2">
                    <img src="assets/logos/logo-mark.png" alt="Logo" class="h-8 w-8" onerror="this.style.display='none'">
                    <h1 class="text-xl font-bold font-display lowercase">citavers</h1>
                </a>
                
                <nav class="flex-grow space-y-1 overflow-y-auto custom-scrollbar">
                    <h3 class="px-3 text-xs font-bold uppercase text-slate-500 dark:text-slate-400 tracking-wider mb-2 mt-2">Library</h3>
                    
                    <a href="#/app" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 hover:text-primary transition-colors">
                        <span class="material-symbols-outlined text-[20px]">inbox</span>
                        <span class="text-sm font-medium">All Papers</span>
                    </a>
                    <a href="#/graph" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 hover:text-primary transition-colors">
                        <span class="material-symbols-outlined text-[20px]">hub</span>
                        <span class="text-sm font-medium">Network</span>
                    </a>
                    
                    <!-- Dynamic Status & Collections Container -->
                    <div id="sidebar-dynamic-content">
                        <div class="pt-6">
                            <h3 class="px-3 text-xs font-bold uppercase text-slate-500 dark:text-slate-400 tracking-wider mb-2">Status</h3>
                            <div id="sidebar-status-list" class="space-y-1"></div>
                        </div>
                        <div id="sidebar-collections-section" class="pt-6"></div>
                        <div id="sidebar-tags-section" class="pt-6"></div>
                    </div>
                </nav>

                <div class="mt-auto pt-4 border-t border-slate-200 dark:border-slate-800">
                    <a href="#/settings" class="flex items-center gap-3 px-3 py-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800/50 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">settings</span>
                        <span class="text-sm font-medium">Settings</span>
                    </a>
                </div>
            </aside>

            <!-- Main Application Area -->
            <div class="flex-1 flex flex-col min-w-0 bg-slate-50 dark:bg-[#0B0F19]">
                <!-- Header -->
                <header class="flex items-center justify-between px-4 sm:px-6 py-3 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-card-dark sticky top-0 z-20">
                    <div class="flex items-center gap-3 sm:gap-4 flex-1">
                        <button id="mobile-menu-btn" class="lg:hidden p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg">
                            <span class="material-symbols-outlined">menu</span>
                        </button>
                        
                        <!-- Search Bar -->
                        <div class="relative flex-1 max-w-2xl">
                            <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]">search</span>
                            <input id="search-input" 
                                class="w-full h-10 pl-10 pr-4 bg-slate-100 dark:bg-slate-800 border-none rounded-lg focus:ring-2 focus:ring-primary text-sm placeholder-slate-500 dark:text-slate-200" 
                                placeholder="Search..." type="text" />
                        </div>
                        
                        <!-- Search Mode -->
                        <div class="hidden md:flex bg-slate-100 dark:bg-slate-800 rounded-lg p-1">
                            <button id="search-mode-all" class="px-3 py-1 text-xs font-medium rounded shadow-sm bg-white dark:bg-slate-600 text-slate-900 dark:text-white transition-all">All</button>
                            <button id="search-mode-notes" class="px-3 py-1 text-xs font-medium rounded text-slate-500 hover:text-slate-900 dark:hover:text-white transition-all">Notes</button>
                        </div>
                    </div>

                    <div class="flex items-center gap-2 sm:gap-3 ml-2 sm:ml-4">
                        <a href="#/add" class="flex items-center gap-2 px-3 sm:px-4 py-2 bg-primary hover:bg-primary-dark text-white text-sm font-semibold rounded-lg transition-colors shadow-lg shadow-blue-500/20">
                            <span class="material-symbols-outlined text-[20px]">add</span>
                            <span class="hidden sm:inline">Add Paper</span>
                        </a>
                        <div id="auth-button"></div>
                    </div>
                </header>

                <!-- Router View Container -->
                <main id="app" class="flex-grow p-4 sm:p-6 overflow-y-auto"></main>
            </div>
        </div>
    </div>

    <!-- Global Overlays -->
    <div id="toast-container" class="fixed top-6 right-6 z-[60] space-y-3 pointer-events-none"></div>
    <div id="command-palette-container"></div>
    <div id="auth-modal-container"></div>

    <!-- Scripts -->
    <script>
        // --- 1. Routing Logic ---
        function handleRouting() {
            const hash = window.location.hash;
            const landingPage = document.getElementById('landing-page');
            const appShell = document.getElementById('app-shell');
            
            // If hash is empty or just #/ -> Show Landing Page
            if (!hash || hash === '#/' || hash === '#') {
                landingPage.classList.remove('hidden');
                appShell.classList.add('hidden');
                document.body.style.overflow = ''; // Enable body scroll for landing page
            } else {
                // Any other route -> Show App Shell
                landingPage.classList.add('hidden');
                appShell.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // App handles its own scrolling
                
                // Dispatch custom event when app shell becomes visible so app.js can re-initialize handlers
                // Use setTimeout to ensure DOM is updated before dispatching
                setTimeout(() => {
                    window.dispatchEvent(new CustomEvent('app-shell-visible'));
                }, 0);
            }
        }

        // Initialize routing
        window.addEventListener('load', handleRouting);
        window.addEventListener('hashchange', handleRouting);
    </script>
    
    <!-- Core App Script -->
    <script type="module" src="app.js"></script>

</body>
</html>